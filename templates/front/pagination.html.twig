{% set recherche = app.request.get('recherche') is not empty ? '&recherche='~app.request.get('recherche')|replace({' ': '+'}) : '' %}

<ul class="unstyled flex-container">
    {# Lien première page - texte #}
    <li>
        {% if page != 1 %}
            <a href="?page=1{{ recherche }}">{#{{ "Première page"|trans }}#}<i class="fas fa-angle-double-left"></i></a>
        {% else %}
            {#<span>{{ "Première page"|trans }}</span>#}
            <span><i class="fas fa-angle-double-left"></i></span>
        {% endif %}
    </li>

    {# Lien page précédente - texte #}
    <li>
        {% if page != 1 %}
            <a href="?page={{ page - 1 }}{{ recherche }}">{#{{ "Page précédente"|trans }}#}<i class="fas fa-angle-left"></i></a>
        {% else %}
            {#<span>{{ "Page précédente"|trans }}</span>#}
            <span><i class="fas fa-angle-left"></i></span>
        {% endif %}
    </li>

    {# Lien première page - nb #}
    {% if page > 2 %}
        <li>
            <a href="?page=1{{ recherche }}">1</a>
        </li>
        {% if page > 3 %}
            <li>
                <span>...</span>
            </li>
        {% endif %}
    {% endif %}

    {# Lien page précédente - nb #}
    {% if page != 1 %}
        <li>
            <a href="?page={{ page - 1 }}{{ recherche }}">{{ page - 1 }}</a>
        </li>
    {% endif %}

    {# Page actuelle #}
    <li class="pagination-active">
        <span>
            {{ page }}
        </span>
    </li>

    {# Lien page suivante - nb #}
    {% if page != nbPages %}
        <li>
            <a href="?page={{ page + 1 }}{{ recherche }}">{{ page + 1 }}</a>
        </li>
    {% endif %}

    {# Lien dernière page - nb #}
    {% if page + 1 < nbPages %}
        {% if page + 2 < nbPages %}
            <li>
                <span>...</span>
            </li>
        {% endif %}
        <li>
            <a href="?page={{ nbPages }}{{ recherche }}">{{ nbPages }}</a>
        </li>
    {% endif %}

    {# Lien page suivante - texte #}
    <li>
        {% if page != nbPages %}
            <a href="?page={{ page + 1 }}{{ recherche }}">{#{{ "Page suivante"|trans }}#}<i class="fas fa-angle-right"></i></a>
        {% else %}
            {#<span>{{ "Page suivante"|trans }}</span>#}
            <span><i class="fas fa-angle-right"></i></span>
        {% endif %}
    </li>

    {# Lien dernière page - texte #}
    <li>
        {% if page != nbPages %}
            <a href="?page={{ nbPages }}{{ recherche }}">{#{{ "Dernière page"|trans }}#}<i class="fas fa-angle-double-right"></i></a>
        {% else %}
            {#<span>{{ "Dernière page"|trans }}</span>#}
            <span><i class="fas fa-angle-double-right"></i></span>
        {% endif %}
    </li>
</ul>