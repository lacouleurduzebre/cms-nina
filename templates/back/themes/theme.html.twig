{% extends 'back/base.html.twig' %}

{% block content %}
    <h1>Thèmes</h1>
    <div class="messages">
        <div class="loader"><i class="fas fa-sync fa-spin"></i></div>
        <div class="message-ok"></div>
        <div class="message-fail"><i class="fas fa-times"></i>{{ "Une erreur est survenue"|trans }}</div>
    </div>
    <div class="grid-3 has-gutter-xl themes">
        {% for nom,theme in themes %}
            <div id="{{ nom }}" class="theme{% if config.theme == nom %} actif{% endif %}">
                <div class="theme-illustration">
                    <div class="theme-actif">{{ 'Activé'|trans }}</div>
                    {% if theme.installe %}
                        {% if assetExists(app.request.baseUrl~'themes_thumbs/'~nom~'.jpg') %}
                            <img src="{{ asset('themes_thumbs/'~nom~'.jpg') }}" alt="{{ nom }}">
                        {% else %}
                            <i class="fas fa-camera"></i>
                        {% endif %}
                    {% else %}
                        <img src="https://www.cms-nina.fr/themes-nina/{{ nom }}.jpg" alt="{{ nom }}">
                    {% endif %}
                </div>
                <div class="theme-infos">
                    <h2>{{ theme.nom }}</h2>
                    <p><strong>{{ "Auteur : "|trans }}</strong>{{ theme.auteur }}</p>
                    <p><strong>{{ "Site de l'auteur : "|trans }}</strong><a href="{{ theme.site }}">{{ theme.site }}</a></p>
                    <p><strong>{{ "Description : "|trans }}</strong>{{ theme.description }}</p>
                </div>
                <div class="theme-actions txtcenter" {% if theme.lien is defined %}data-lien="{{ theme.lien }}"{% endif %} data-nom="{{ nom }}">
                    <button class="installation-theme{% if theme.installe or theme.lien is not defined%} hidden{% endif %}">{{ "Installer"|trans }}</button>
                    {#<a class="parametrage-theme btn{% if config.theme != nom %} hidden{% endif %}" href="{{ path('parametrerTheme', { 'nom' : nom }) }}">{{ "Paramétrer"|trans }}</a>#}
                    {#<button class="maj-theme{% if not theme.installe %} hidden{% endif %}">Mettre à jour</button>#}
                    <button class="activation-theme{% if not theme.installe or config.theme == nom %} hidden{% endif %}">{{ "Activer"|trans }}</button>
                    <button class="desinstallation-theme{% if not theme.installe or theme.lien is not defined or config.theme == nom %} hidden{% endif %}">{{ "Désinstaller"|trans }}</button>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}